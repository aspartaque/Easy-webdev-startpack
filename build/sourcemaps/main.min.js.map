{"version":3,"sources":["01_main.js"],"names":["$","document","ready","foundation","click","toggleClass","swiper","Swiper","slidesPerView","centeredSlides","pagination","el","type","navigation","nextEl","prevEl","swiper1","freeMode","watchSlidesProgress","swiper2","thumbs","css","text","app","Vue","data","dates","times","currentDate","currentTime","event","tickets","cart","total","masks","title","weekdays","attrs","days","weeks","[object Object]","this","event_id","address","methods","getTimes","date","setTime","time","getTickets","console","log","$refs","pages","label","1","id","name","price","quantity","2","key","addTicket","ticket","updateTotal","removeTicket","isEmpty","obj","elem","clearCart"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["$(document).ready(() => {\r\n  $(document).foundation();\r\n});\r\n\r\n$('.mobile__menu').click(function() {\r\n  $('.mobile__menu').toggleClass('mobile__menu-icon-active');\r\n});\r\n\r\n/*slider*/\r\nvar swiper = new Swiper(\".mySwiper\", {\r\n  slidesPerView: \"auto\",\r\n  centeredSlides: true,\r\n  pagination: {\r\n    el: \".swiper-pagination\",\r\n    type: \"fraction\",\r\n  },\r\n  navigation: {\r\n    nextEl: \".swiper-button-next\",\r\n    prevEl: \".swiper-button-prev\",\r\n  },\r\n});\r\n\r\n/*slider with thumbs*/\r\nvar swiper1 = new Swiper(\".mySwiper-1\", {\r\n  freeMode: false,\r\n  navigation: {\r\n    nextEl: \"#swiper-button-thumbs-next\",\r\n    prevEl: \"#swiper-button-thumbs-prev\",\r\n  },\r\n  centeredSlides: false,\r\n  watchSlidesProgress: true,\r\n  slidesPerView: 3,\r\n});\r\nvar swiper2 = new Swiper(\".mySwiper2\", {\r\n  thumbs: {\r\n    swiper: swiper1,\r\n  },\r\n});\r\n\r\n/*section virtual text open*/\r\n$('.l-virtual__descr-open-btn').click(function() {\r\n  $('.l-virtual__descr-container').toggleClass('l-virtual__descr-container-open');\r\n  $('.l-events__detail-image').css('background-size', '100%');\r\n  $('.l-virtual__descr-open-btn').text('СКРЫТЬ ТЕКСТ');\r\n});\r\n/*section collections text open*/\r\n$('.open-text').click(function() {\r\n  $('.l-collections-small-container').toggleClass('opened-text');\r\n  $('.open-text').text('Свернуть');\r\n});\r\n\r\nvar app = new Vue({\r\n\tel: '#app',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdates: ['28-01-2022', '29-01-2022', '30-01-2022'],\r\n\t\t\ttimes: [],\r\n\t\t\tcurrentDate: null,\r\n\t\t\tcurrentTime: null,\r\n\t\t\tevent: {},\r\n\t\t\ttickets: [],\r\n\t\t\tcart: {},\r\n\t\t\ttotal: 0,\r\n      masks: {\r\n        title: 'MMM',\r\n        weekdays: 'WWW',\r\n      },\r\n      attrs: [\r\n        {\r\n          days: 7,\r\n          weeks: 1\r\n        }\r\n      ]\r\n\t\t};\r\n\t},\r\n  // components: {\r\n  //   Calendar,\r\n  // },\r\n\tmounted() {\r\n\t\tthis.event = {\r\n\t\t\tevent_id: 1001,\r\n\t\t\taddress: 'ул. Ленина 1',\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n    getTimes: function (date) {\r\n      this.currentTime = null;\r\n\t\t\tthis.currentDate = date;\r\n      \r\n\t\t\t// get times API\r\n\t\t\t// example\r\n      \r\n\t\t\tthis.times = ['12:00', '13:00'];\r\n\t\t},\r\n\t\tsetTime: function (time) {\r\n      this.currentTime = time;\r\n\t\t\tthis.tickets = this.getTickets(time);\r\n\t\t},\r\n\t\tgetTickets: function (time) {\r\n      // return API\r\n      console.log(this.$refs.pages.pages);\r\n\t\t\tconsole.log('get API time:', time);\r\n      this.$refs.pages.pages[0].days[5].label = '222';\r\n\t\t\tlet tickets = {\r\n\t\t\t\t1: {\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tname: 'Взрослый',\r\n\t\t\t\t\tprice: 1000,\r\n\t\t\t\t\tquantity: 0,\r\n\t\t\t\t},\r\n\t\t\t\t2: {\r\n\t\t\t\t\tid: 2,\r\n\t\t\t\t\tname: 'Детский',\r\n\t\t\t\t\tprice: 800,\r\n\t\t\t\t\tquantity: 0,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tif (this.cart[this.currentDate + this.currentTime]) {\r\n\t\t\t\tfor (let key in this.cart[this.currentDate + this.currentTime][\r\n\t\t\t\t\t'tickets'\r\n\t\t\t\t]) {\r\n\t\t\t\t\ttickets[key]['quantity'] =\r\n\t\t\t\t\t\tthis.cart[this.currentDate + this.currentTime]['tickets'][key][\r\n\t\t\t\t\t\t\t'quantity'\r\n\t\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tickets;\r\n\t\t},\r\n\t\taddTicket: function (ticket) {\r\n\t\t\tticket.quantity++;\r\n\r\n\t\t\tif (!this.cart[this.currentDate + this.currentTime]) {\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tevent_id: this.event.event_id,\r\n\t\t\t\t\tdate: this.currentDate,\r\n\t\t\t\t\ttime: this.currentTime,\r\n\t\t\t\t\taddress: this.event.address,\r\n\t\t\t\t\ttickets: {},\r\n\t\t\t\t};\r\n\t\t\t\tthis.cart[this.currentDate + this.currentTime] = data;\r\n\t\t\t}\r\n\r\n\t\t\tthis.cart[this.currentDate + this.currentTime]['tickets'][ticket.id] = {\r\n\t\t\t\t...ticket,\r\n\t\t\t};\r\n\r\n\t\t\tthis.updateTotal();\r\n\t\t\t// => return updated cart API\r\n\t\t},\r\n\t\tremoveTicket: function (ticket) {\r\n\t\t\tconsole.log('remove ticket');\r\n\r\n\t\t\t// если больше 0 то минусуем\r\n\t\t\tif (ticket.quantity > 1) {\r\n\t\t\t\tticket.quantity--;\r\n\t\t\t\tthis.cart[this.currentDate + this.currentTime]['tickets'][ticket.id] = {\r\n\t\t\t\t\t...ticket,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tif (ticket.quantity === 1) {\r\n\t\t\t\t\tticket.quantity--;\r\n\t\t\t\t}\r\n\t\t\t\t// если 1 то удаляем из массива\r\n\t\t\t\tdelete this.cart[this.currentDate + this.currentTime]['tickets'][\r\n\t\t\t\t\tticket.id\r\n\t\t\t\t];\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.isEmpty(\r\n\t\t\t\t\t\tthis.cart[this.currentDate + this.currentTime]['tickets']\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\tdelete this.cart[this.currentDate + this.currentTime];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateTotal();\r\n\t\t},\r\n\t\tisEmpty: function (obj) {\r\n\t\t\tfor (let key in obj) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tupdateTotal: function () {\r\n\t\t\tlet total = 0;\r\n\r\n\t\t\tfor (const key in this.cart) {\r\n\t\t\t\tlet elem = this.cart[key]['tickets'];\r\n\r\n\t\t\t\tfor (const ticket in elem) {\r\n\t\t\t\t\tlet value = elem[ticket]['price'] * elem[ticket]['quantity'];\r\n\t\t\t\t\ttotal = total + value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.total = total;\r\n\t\t},\r\n\t\tclearCart: function () {\r\n\t\t\tthis.currentDate = null;\r\n\t\t\tthis.currentTime = null;\r\n\t\t\tthis.times = [];\r\n\t\t\tthis.cart = {};\r\n\t\t\tthis.updateTotal();\r\n\t\t},\r\n\t},\r\n});\r\n"]}