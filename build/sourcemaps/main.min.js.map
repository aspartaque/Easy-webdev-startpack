{"version":3,"sources":["01_main.js"],"names":["$","document","ready","foundation","click","toggleClass","swiper","Swiper","slidesPerView","centeredSlides","pagination","el","type","navigation","nextEl","prevEl","swiper1","freeMode","watchSlidesProgress","swiper2","thumbs","css","text","app","Vue","data","dates","times","currentDate","currentTime","event","tickets","cart","total","masks","title","weekdays","[object Object]","this","event_id","address","methods","getDate","day","id","ariaLabel","months","month","year","setTime","time","getTickets","console","log","1","name","price","quantity","2","key","addTicket","ticket","date","updateTotal","removeTicket","isEmpty","obj","elem","clearCart"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["$(document).ready(() => {\r\n  $(document).foundation();\r\n});\r\n\r\n$('.mobile__menu').click(function() {\r\n  $('.mobile__menu').toggleClass('mobile__menu-icon-active');\r\n});\r\n\r\n/*slider*/\r\nvar swiper = new Swiper(\".mySwiper\", {\r\n  slidesPerView: \"auto\",\r\n  centeredSlides: true,\r\n  pagination: {\r\n    el: \".swiper-pagination\",\r\n    type: \"fraction\",\r\n  },\r\n  navigation: {\r\n    nextEl: \".swiper-button-next\",\r\n    prevEl: \".swiper-button-prev\",\r\n  },\r\n});\r\n\r\n/*slider with thumbs*/\r\nvar swiper1 = new Swiper(\".mySwiper-1\", {\r\n  freeMode: false,\r\n  navigation: {\r\n    nextEl: \"#swiper-button-thumbs-next\",\r\n    prevEl: \"#swiper-button-thumbs-prev\",\r\n  },\r\n  centeredSlides: false,\r\n  watchSlidesProgress: true,\r\n  slidesPerView: 3,\r\n});\r\nvar swiper2 = new Swiper(\".mySwiper2\", {\r\n  thumbs: {\r\n    swiper: swiper1,\r\n  },\r\n});\r\n\r\n/*section virtual text open*/\r\n$('.l-virtual__descr-open-btn').click(function() {\r\n  $('.l-virtual__descr-container').toggleClass('l-virtual__descr-container-open');\r\n  $('.l-events__detail-image').css('background-size', '100%');\r\n  $('.l-virtual__descr-open-btn').text('СКРЫТЬ ТЕКСТ');\r\n});\r\n/*section collections text open*/\r\n$('.open-text').click(function() {\r\n  $('.l-collections-small-container').toggleClass('opened-text');\r\n  $('.open-text').text('Свернуть');\r\n});\r\n\r\nvar app = new Vue({\r\n\tel: '#app',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdates: ['28-01-2022', '29-01-2022', '30-01-2022'],\r\n\t\t\ttimes: [],\r\n\t\t\tcurrentDate: null,\r\n\t\t\tcurrentTime: null,\r\n\t\t\tevent: {},\r\n\t\t\ttickets: [],\r\n\t\t\tcart: {},\r\n\t\t\ttotal: 0,\r\n      masks: {\r\n        title: 'MMM',\r\n        weekdays: 'WWW',\r\n      },\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.event = {\r\n\t\t\tevent_id: 1001,\r\n\t\t\taddress: 'ул. Ленина 1',\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n    getDate: function (day) { //get date from calendar\r\n      this.currentTime = null;\r\n      let currentDate = {\r\n        id: day.id,\r\n        ariaLabel: day.ariaLabel,\r\n        day: day.day,\r\n        months: day.month,\r\n        year: day.year\r\n      };\r\n      this.currentDate = currentDate;\r\n      \r\n      this.times = ['12:00', '13:00'];\r\n    },\r\n\t\tsetTime: function (time) {\r\n      this.currentTime = time;\r\n\t\t\tthis.tickets = this.getTickets(time);\r\n\t\t},\r\n\t\tgetTickets: function (time) {\r\n      // return API\r\n\t\t\tconsole.log('get API time:', time);\r\n\r\n\t\t\tlet tickets = {\r\n\t\t\t\t1: {\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tname: 'Взрослый',\r\n\t\t\t\t\tprice: 1000,\r\n\t\t\t\t\tquantity: 0,\r\n\t\t\t\t},\r\n\t\t\t\t2: {\r\n\t\t\t\t\tid: 2,\r\n\t\t\t\t\tname: 'Детский',\r\n\t\t\t\t\tprice: 800,\r\n\t\t\t\t\tquantity: 0,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tif (this.cart[this.currentDate.id + this.currentTime]) {\r\n\t\t\t\tfor (let key in this.cart[this.currentDate.id + this.currentTime][\r\n\t\t\t\t\t'tickets'\r\n\t\t\t\t]) {\r\n\t\t\t\t\ttickets[key]['quantity'] =\r\n\t\t\t\t\t\tthis.cart[this.currentDate.id + this.currentTime]['tickets'][key][\r\n\t\t\t\t\t\t\t'quantity'\r\n\t\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tickets;\r\n\t\t},\r\n\t\taddTicket: function (ticket) {\r\n\t\t\tticket.quantity++;\r\n\r\n\t\t\tif (!this.cart[this.currentDate.id + this.currentTime]) {\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tevent_id: this.event.event_id,\r\n\t\t\t\t\tdate: this.currentDate,\r\n\t\t\t\t\ttime: this.currentTime,\r\n\t\t\t\t\taddress: this.event.address,\r\n\t\t\t\t\ttickets: {},\r\n\t\t\t\t};\r\n\t\t\t\tthis.cart[this.currentDate.id + this.currentTime] = data;\r\n\t\t\t}\r\n\r\n\t\t\tthis.cart[this.currentDate.id + this.currentTime]['tickets'][ticket.id] = {\r\n\t\t\t\t...ticket,\r\n\t\t\t};\r\n\r\n\t\t\tthis.updateTotal();\r\n\t\t\t// => return updated cart API\r\n\t\t},\r\n\t\tremoveTicket: function (ticket) {\r\n\t\t\tconsole.log('remove ticket');\r\n\r\n\t\t\t// если больше 0 то минусуем\r\n\t\t\tif (ticket.quantity > 1) {\r\n\t\t\t\tticket.quantity--;\r\n\t\t\t\tthis.cart[this.currentDate.id + this.currentTime]['tickets'][ticket.id] = {\r\n\t\t\t\t\t...ticket,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tif (ticket.quantity === 1) {\r\n\t\t\t\t\tticket.quantity--;\r\n\t\t\t\t}\r\n\t\t\t\t// если 1 то удаляем из массива\r\n\t\t\t\tdelete this.cart[this.currentDate.id + this.currentTime]['tickets'][\r\n\t\t\t\t\tticket.id\r\n\t\t\t\t];\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.isEmpty(\r\n\t\t\t\t\t\tthis.cart[this.currentDate.id + this.currentTime]['tickets']\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\tdelete this.cart[this.currentDate.id + this.currentTime];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateTotal();\r\n\t\t},\r\n\t\tisEmpty: function (obj) {\r\n\t\t\tfor (let key in obj) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tupdateTotal: function () {\r\n\t\t\tlet total = 0;\r\n\r\n\t\t\tfor (const key in this.cart) {\r\n\t\t\t\tlet elem = this.cart[key]['tickets'];\r\n\r\n\t\t\t\tfor (const ticket in elem) {\r\n\t\t\t\t\tlet value = elem[ticket]['price'] * elem[ticket]['quantity'];\r\n\t\t\t\t\ttotal = total + value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.total = total;\r\n\t\t},\r\n\t\tclearCart: function () {\r\n\t\t\tthis.currentDate = null;\r\n\t\t\tthis.currentTime = null;\r\n\t\t\tthis.times = [];\r\n\t\t\tthis.cart = {};\r\n\t\t\tthis.updateTotal();\r\n\t\t},\r\n\t},\r\n});\r\n"]}